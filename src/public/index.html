<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Classifying Exoplanets</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { font-family: Arial, sans-serif; margin: 2em; background: #f8f9fa; }
        h1 { color: #2c3e50; }
        .disposition-label {
            display: inline-block;
            margin: 1em 0 2em 0;
            padding: 0.5em 2em;
            font-size: 1.5em;
            font-weight: bold;
            color: #fff;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            letter-spacing: 0.1em;
            background: #ffffff01;
            
        }
        
        .disposition-label[data-prediction="CONFIRMED"] {
            background: #27ae60;
        }

        .disposition-label[data-prediction="FALSE POSITIVE"] {
            background: #c0392b;
        }

        .container { max-width: 700px; margin: auto; background: #fff; padding: 2em; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);}
        p { color: #444; }
        form { margin-top: 2em; }
        .form-group { margin-bottom: 1.5em; }
        label { display: block; margin-bottom: 0.5em; font-weight: bold; }
        .importance { font-size: 0.9em; color: #888; }
        input[type="range"] { width: 100%; }
        output { margin-left: 1em; font-weight: bold; }
        button { margin-top: 1em; padding: 0.5em 1.5em; font-size: 1em; border-radius: 4px; border: none; background: #2c3e50; color: #fff; cursor: pointer; }
        button:hover { background: #34495e; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Classifying Exoplanets</h1>
        <p>Modify the below inputs and see if the data looks like a planet!</p>
    <p>Predicted disposition based on Keppler Objects of Interest data: <div id="prediction-label" class="disposition-label">LOADING...</div></p>
        
        <form>
            <div class="form-group">
                <label for="prad">Planet Radius<span class="importance">(importance: 0.254)</span></label>
                <input type="range" id="prad" name="prad" min="0.1" max="200" step="0.1" value="4">
                <output id="prad_out">2.5</output>
            </div>
            <div class="form-group">
                <label for="insol">Insolation Flux<span class="importance">(importance: 0.207)</span></label>
                <input type="range" id="insol" name="insol" min="0" max="10000" step="1" value="4692">
                <output id="insol_out">5</output>
            </div>
            <div class="form-group">
                <label for="model_snr">Model SNR<span class="importance">(importance: 0.132)</span></label>
                <input type="range" id="model_snr" name="model_snr" min="0" max="100" step="1" value="39">
                <output id="model_snr_out">2.5</output>
            </div>
            <div class="form-group">
                <label for="period">Period<span class="importance">(importance: 0.122)</span></label>
                <input type="range" id="period" name="period" min="0.2" max="380" step="0.2" value="2.5">
                <output id="period_out">2.5</output>
            </div>
            <div class="form-group">
                <label for="duration">Duration<span class="importance">(importance: 0.077)</span></label>
                <input type="range" id="duration" name="duration" min="0.1" max="6" step="0.01" value="2.5">
                <output id="duration_out">2.5</output>
            </div>
            <div class="form-group">
                <label for="teq">Equilibrium Temperature<span class="importance">(importance: 0.046)</span></label>
                <input type="range" id="teq" name="teq" min="0.5" max="8" step="0.01" value="5">
                <output id="teq_out">5</output>
            </div>
            <div class="form-group">
                <label for="srad">Stellar Radius<span class="importance">(importance: 0.045)</span></label>
                <input type="range" id="srad" name="srad" min="0" max="3" step="0.01" value="2.5">
                <output id="srad_out">2.5</output>
            </div>
            <div class="form-group">
                <label for="slogg">Stellar log(g)<span class="importance">(importance: 0.044)</span></label>
                <input type="range" id="slogg" name="slogg" min="3" max="5" step="0.01" value="2.5">
                <output id="slogg_out">2.5</output>
            </div>
            <div class="form-group">
                <label for="steff">Stellar Effective Temperature <span class="importance">(importance: 0.044)</span></label>
                <input type="range" id="steff" name="steff" min="0" max="8000" step="1" value="5">
                <output id="steff_out">5</output>
            </div>
            <div class="form-group">
                <label for="depth">Transit Depth<span class="importance">(importance: 0.030)</span></label>
                <input type="range" id="depth" name="depth" min="0" max="25000" step="1" value="2.5">
                <output id="depth_out">2.5</output>
            </div>
        </form>
        <script>

            function updateUi(input) {
                document.getElementById('period_out').value = input[0];
                document.getElementById('duration_out').value = input[1];
                document.getElementById('depth_out').value = input[2];
                document.getElementById('prad_out').value = input[3];
                document.getElementById('teq_out').value = input[4];
                document.getElementById('insol_out').value = input[5];
                document.getElementById('model_snr_out').value = input[6];
                document.getElementById('steff_out').value = input[7];
                document.getElementById('slogg_out').value = input[8];
                document.getElementById('srad_out').value = input[9];
            }

            function getInput() {
                return [
                    document.getElementById('period').value,
                    document.getElementById('duration').value,
                    document.getElementById('depth').value,
                    document.getElementById('prad').value,
                    document.getElementById('teq').value,
                    document.getElementById('insol').value,
                    document.getElementById('model_snr').value,
                    document.getElementById('steff').value,
                    document.getElementById('slogg').value,
                    document.getElementById('srad').value,
                ]
            }

            async function updatePrediction(input) {
                const prediction = await getPrediction(input);
                const label = document.getElementById('prediction-label');
                label.innerText = prediction;
                label.setAttribute('data-prediction', prediction);
            }

            document.addEventListener('DOMContentLoaded', async () => {
                console.log('DOM fully loaded and parsed');
                input = getInput();
                updateUi(input);
                await updatePrediction(input);
            });

            document.addEventListener('change', async () => {
                input = getInput();
                updateUi(input);
                await updatePrediction(input);

                console.log(input)
            })

            getPrediction = async (input) => {
                dict = {
                    'period': parseFloat(input[0]),
                    'duration': parseFloat(input[1]),
                    'depth': parseFloat(input[2]),
                    'prad': parseFloat(input[3]),
                    'teq': parseFloat(input[4]),
                    'insol': parseFloat(input[5]),
                    'model_snr': parseFloat(input[6]),
                    'steff': parseFloat(input[7]),
                    'slogg': parseFloat(input[8]),
                    'srad': parseFloat(input[9]),
                }

                const response = await fetch('/predict', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ dict })
                });
                const data = await response.json();
                return data.prediction;
            }
        </script>
    </div>
</body>
</html>